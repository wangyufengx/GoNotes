# 第三章 拥抱风险

SRE旨在寻找快速创新和高效服务之间的风险平衡。

### 管理风险

高昂的成本主要存在于以下两个维度：

- 冗余物理服务器/计算资源的成本
- 机会成本

在SRE团队中，管理服务的可靠性很大程度上是通过管理风险来进行的。

### 度量服务的风险

Google选择主要关注计划外停机这一指标来评价目前的系统表现以及追踪一段时间内的改进和退步。

- 基于时间的可用性

  可用性=系统正常运行时间/（系统正常运行时间+停机时间）

- 合计可用性

  可用性=成功请求数、总的请求数

### 服务的风险容忍度

在一个正式环境或安全关键的系统中，服务的风险容忍度通常直接根据基本产品或服务的定义建立的。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

#### 辨别消费者服务的风险容忍度

- 可用性目标

  对于某个Google而言，服务的可用性目标通常取决于它提供的功能以及这项服务在市场上是如何定位的。

- 故障类型

- 成本

  决定一项服务的合理可用性目标时，成本是很重要的考虑因素。

- 其他服务指标

#### 基础设施服务的风险容忍度

- 可用性目标水平
- 故障类型
- 成本

### 使用错误预算的目的

典型的紧张局势：

- 软件对故障的容忍度
- 测试
- 发布频率
- 金丝雀测试的持续时间和大小

#### 错误预算的构建过程

Google的实际做法：

- 产品管理层定义一个SLO，确定一项服务在每个季度预计的正常运行时间。
- 实际在线时间是通过一个中立的第三方来测算的。如监控系统。
- 这两个数字的差值就是这个季度中剩余的不可靠性预算。
- 只要测算出的正常在线时间高于SLO，也就是说，只要仍然有剩余的错误预算，就可以发布的新版本。

#### 好处

错误预算的主要好处就是它能够激励产品研发和SRE一起找出创新和可靠性之间的平衡点。
