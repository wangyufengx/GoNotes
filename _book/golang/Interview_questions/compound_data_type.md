# 复合数据类型

## 切片（Slice）

### 切片的结构定义

```go
type slice struct {
	array unsafe.Pointer	//数组指针
	len   int				//长度
	cap   int				//容量
}
```

### 切片中创建子切片

- 切片创建子切片语法。

```
slice[i:j]
slice[i:j:k]
```

 操作符 [i,j]。基于数组（切片）可以使用操作符 [i,j] 创建新的切片，从索引 i，到索引 j 结束，截取已有数组（切片）的任意部分，返回新的切片，新切片的值包含原数组（切片）的 i 索引的值，但是不包含 j 索引的值。i、j 都是可选的，i 如果省略，默认是 0，j 如果省略，默认是原数组（切片）的长度。i、j 都不能超过这个长度值。

 假如底层数组的大小为 k，截取之后获得的切片的长度和容量的计算方法：**长度：j-i，容量：k-i**。

 截取操作符还可以有第三个参数，形如 [i,j,k]，第三个参数 k 用来限制新切片的容量，但不能超过原数组（切片）的底层数组大小。截取获得的切片的长度和容量分别是：**j-i、k-i。**

```
func main() {
	a := []int{1, 2, 3, 4, 5}
	b := a[1:3:4]
	fmt.Println(a, b)           //[1 2 3 4 5] [2 3]
	fmt.Println(len(a), cap(a)) //5 5
	fmt.Println(len(b), cap(b)) //2 3
}
```

- 原切片与子切片会共享底层数组。原切片共享部分的修改时，子切片的部分也会修改。（切片操作并不复制切片指向的元素。它创建一个新的切片并复用原来切片的底层数组）

```
func main() {
	a := []int{1, 2, 3, 4, 5}
	b := a[2:4]
	b[0] = 99
	fmt.Println(a, b) //[1 2 99 4 5] [99 4]
}
func main() {
	a := []int{1, 2, 3, 4, 5}
	b := a[2:4]
	a[2] = 99
	fmt.Println(a, b) //[1 2 99 4 5] [99 4]
}
```

### 切片扩容机制

- 切片通过append实现扩容。
- 容量小于1024时，切片扩容为原切片的2倍，容量大于等于1024时，切片扩容为原来的1.25倍。



